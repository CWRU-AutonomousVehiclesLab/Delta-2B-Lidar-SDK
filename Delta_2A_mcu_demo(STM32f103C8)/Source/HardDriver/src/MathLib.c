/********************************************************************************************************************/
//文件名:   MathLib.c
//描述:     数学函数库
//版本:     
//日期:     
//作者:     
/********************************************************************************************************************/

#include    "MathLib.h"

/********************************************************************************************************************/
//描述:	小端转大端16
//输入:	数组
//输出:数组
/********************************************************************************************************************/
uint16_t Little2BigEndian16(uint16_t dat)
{
	return ((dat>>8)|(dat<<8));
}

/********************************************************************************************************************/
//描述:	批量小端转大端16
//输入:	数组
//输出:数组
/********************************************************************************************************************/
void Little2BigEndian_Mul16(uint16_t *pdat,uint16_t len)
{
	while(len)
	{
		*pdat = Little2BigEndian16(*pdat);
		pdat++;len--;
	}
}

/********************************************************************************************************************/
//描述:	小端转大端32
//输入:	数组
//输出:数组
/********************************************************************************************************************/
uint32_t Little2BigEndian32(uint32_t dat)
{
	return ((dat<<24)&0xff000000)|((dat<<8)&0x00ff0000)|((dat>>8)&0x0000ff00)|(dat>>24);
}

/********************************************************************************************************************/
//描述:	小端方式复制uint16_t
//输入:一组uint16_t	数组复制到uint8_t数组
//输出:uint8_t 数组
/********************************************************************************************************************/
void LittleCopy_16(uint8_t *dest,uint8_t *src,uint16_t len)
{
	while(len)
    {
		*dest = *(src+1);
		*(dest+1) = *src;
		dest+=2;src+=2;
		len--;
	}
}

/********************************************************************************************************************/
//描述:	小端方式一组uint32_t 数据复制到uint8_t
//输入:一组uint32_t	数组复制到uint8_t数组
//输出:uint8_t 数组
/********************************************************************************************************************/
void LittleCopy_32(uint8_t *dest,uint8_t *src,uint16_t len)
{
	while(len)
	{
		*dest = *(src+3);
		*(dest+1) = *(src+2);
		*(dest+2) = *(src+1);
		*(dest+3) = *src;
		dest+=4;src+=4;
		len--;
	}
}

/********************************************************************************************************************/
//描述:	小端方式复制uint16_t
//输入:一组uint16_t	数组复制到uint8_t数组
//输出:uint8_t 数组
/********************************************************************************************************************/
void BigEndianCopy_16(uint8_t *dest,uint8_t *src,uint16_t len)
{
	while(len)
    {
		*dest = *src;
		*(dest+1) = *(src+1);
		dest+=2;src+=2;
		len--;
	}
}

/********************************************************************************************************************/
//描述:	小端方式一组uint32_t 数据复制到uint8_t
//输入:一组uint32_t	数组复制到uint8_t数组
//输出:uint8_t 数组
/********************************************************************************************************************/
void BigEndianCopy_32(uint8_t *dest,uint8_t *src,uint16_t len)
{
	while(len)
	{
		*dest = *src;
		*(dest+1) = *(src+1);
		*(dest+2) = *(src+2);
		*(dest+3) = *(src + 3);
		dest+=4;src+=4;
		len--;
	}
}
/********************************************************************************************************************/
//使用指针传递函数
/********************************************************************************************************************/
void swap(uint16_t *x,uint16_t *y)
{
    uint16_t temp;
    temp = *x;
    *x = *y;
    *y = temp;
}

/********************************************************************************************************************/
//冒泡排序
/********************************************************************************************************************/
void BubbleSort_uint16_t(uint16_t *Ptr,uint16_t Len)
{
    uint16_t i,j;

    for(i = Len - 1;i > 2;i--)
	{
		for(j=i;j<i;j++)
		{
			if(*(Ptr + j) > *(Ptr + j + 1))
				swap((Ptr + j),(Ptr + j + 1));
		}
	}
}
/********************************************************************************************************************/
//描述:	对16位数组取平均值
//输入:	uint16_t 数组,长度,忽略开始和后面的部分数据数量
//输出:  平均值
/********************************************************************************************************************/
uint16_t Average_uint16_t(uint16_t *pdata, uint16_t length, uint16_t ignore)
{
	uint32_t nX;
	uint32_t temp = 0;

	for (nX = ignore; nX< (length - ignore); nX++)
	{
		temp += pdata[nX];
	}
	temp = (temp * 10) / (length - (ignore<<1) );
	temp = (temp + 5) / 10;		//四舍五入
	return (uint16_t)temp;
}

/********************************************************************************************************************/

